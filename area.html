<!DOCTYPE html>
<html>
    <head>
        <title>森林率マップ</title>
        
        <!-- MapLibre GL JSを読み込み -->
        <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
        <link
            href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet"
        />
        <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjapanese.css">
    </head>
    <body>
        <div id="map" style="height: 80vh"></div>
        <script>
            // MapLibreインスタンスを初期化
            const map = new maplibregl.Map({
                container: 'map',
                center: [137.1, 36.5],
                zoom: 4,
                style: {
                    // MapLibre-Style
                    version: 8,
                    glyphs: "http://fonts.openmaptiles.org/{fontstack}/{range}.pbf",
                    sources: {
                        // 地図上で使うデータを定義する
                        /* osm: {
                            type: 'raster', // ラスタータイル
                            tiles: [
                                'https://api.maptiler.com/maps/jp-mierune-gray/{z}/{x}/{y}.png?key=xeycR1Jqna3Gkrzt6ZBw',
                            ],
                            tileSize: 512, // タイルの解像度, デフォルトは512
                            maxzoom: 18,
                            attribution:
                                '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                        }, */
                        forest_area: {
                            type: 'geojson', // GeoJSON
                            data: './area_f_pref_v1.geojson',
                            attribution:
                                '&copy; <a href="https://www.rinya.maff.go.jp/j/keikaku/genkyou/r4/3.html">林野庁森林資源現況総括表(令和4年3月31日現在)</a> contributors',
                        },

                    },
                    layers: [
/*                         {
                            id: 'osm-layer',
                            source: 'osm', // 使うデータをsourcesのkeyで指定する
                            type: 'raster', // データをどのように表示するか指定する
                        }, */
                        
                        {
                            id: 'outline',
                            source: 'forest_area',
                            type: 'line',
                            paint: {
                                'line-color': '#000',
                            },
                        },
                        {
                            id: 'pref-label-layer',
                            source: 'forest_area',
                            type: 'symbol',
                            layout: {
                                'text-field': ['get', 'name'],
                                'text-font': ['Open Sans Semibold', 'Arial Unicode MS Bold'],
                                'text-anchor': 'top',
                                'text-size': [
                                    'interpolate',
                                    ['linear'],
                                    ['zoom'],
                                    10,
                                    8,
                                    14,
                                    18,
                                ],
                            },
                            paint: {
                                'text-halo-width': 1,
                                'text-halo-color': '#fff',
                            },
                        },
                        {
                            id: 'ratio_f',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_f'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_n',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_n'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_p',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_p'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_pb',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_pb'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_pref',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_pref'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_city',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_city'], // 'ratio_f'プロパティの値を取得
                                    20, '#fff',
                                    90, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                        {
                            id: 'ratio_zai',
                            source: 'forest_area',
                            type: 'fill',
                            paint: {
                                'fill-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'ratio_zai'], // 'ratio_f'プロパティの値を取得
                                    0, '#fff',
                                    5, '#006400',
                                ],
                                'fill-opacity': 0.6, // 塗りつぶしの不透明度を設定
                            },
                        },
                    ],
                },
            });
        </script>
    </body>
</html>